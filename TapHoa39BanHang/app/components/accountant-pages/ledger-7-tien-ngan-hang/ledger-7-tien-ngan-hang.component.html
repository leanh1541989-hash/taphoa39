<!--
  S7-HKD: SỔ TIỀN GỬI NGÂN HÀNG
  Circular 88/2021/TT-BTC - Appendix 2 - Mẫu số S7-HKD
-->
<div class="ledger-page">
  <!-- Page Title -->
  <h2 class="page-title">SỔ TIỀN GỬI NGÂN HÀNG</h2>

  <!-- Bank Account Info -->
  <div class="bank-info">
    <div class="info-row">
      <label>Tên ngân hàng:</label>
      <input type="text" [(ngModel)]="tenNganHang" (blur)="updateBankInfo()" 
             placeholder="VD: Vietcombank, BIDV, Agribank..." />
    </div>
    <div class="info-row">
      <label>Số tài khoản:</label>
      <input type="text" [(ngModel)]="soTaiKhoan" (blur)="updateBankInfo()" 
             placeholder="VD: 1234567890" />
    </div>
  </div>

  <!-- Opening Balance -->
  <div class="opening-balance">
    <div class="balance-title">Số dư đầu kỳ</div>
    <div class="balance-grid">
      <div class="balance-item">
        <label>Số dư tài khoản:</label>
        <input type="number" [(ngModel)]="soDuDauKy" (blur)="updateSoDuDauKy()" />
        <span class="currency-label">VNĐ</span>
      </div>
    </div>
  </div>

  <!-- Entry Form -->
  <div class="entry-form">
    <div class="form-title">Thêm bút toán gửi/rút tiền ngân hàng</div>
    <div class="form-grid">
      <div class="form-group">
        <label>Ngày ghi sổ *</label>
        <input type="date" [(ngModel)]="newRecord.ngayThangGhiSo" />
      </div>
      <div class="form-group">
        <label>Số hiệu CT *</label>
        <input type="text" [(ngModel)]="newRecord.chungTu!.soHieu" placeholder="VD: GNH001" />
      </div>
      <div class="form-group">
        <label>Ngày CT</label>
        <input type="date" [(ngModel)]="newRecord.chungTu!.ngayThang" />
      </div>
      <div class="form-group form-group-wide">
        <label>Diễn giải *</label>
        <input type="text" [(ngModel)]="newRecord.dienGiai" placeholder="Nội dung giao dịch" />
      </div>
      <div class="form-group">
        <label>Số tiền GỬI VÀO</label>
        <input type="number" [(ngModel)]="newRecord.soTienGuiVao" placeholder="0" class="input-gui" />
      </div>
      <div class="form-group">
        <label>Số tiền RÚT RA</label>
        <input type="number" [(ngModel)]="newRecord.soTienRutRa" placeholder="0" class="input-rut" />
      </div>
      <div class="form-group">
        <label>Ghi chú</label>
        <input type="text" [(ngModel)]="newRecord.ghiChu" />
      </div>
      <div class="form-group">
        <button class="btn-add" (click)="addRecord()">+ Thêm</button>
      </div>
    </div>
  </div>

  <!-- Summary -->
  <div class="summary-bar">
    <span>Số bút toán: <strong>{{ data.length }}</strong></span>
    <span class="gui">Tổng gửi vào: <strong>{{ getTongGuiVao() }}</strong></span>
    <span class="rut">Tổng rút ra: <strong>{{ getTongRutRa() }}</strong></span>
    <span class="conlai">Số dư: <strong>{{ getSoDuCuoiKy() }}</strong></span>
  </div>

  <!-- Data Table -->
  <app-ledger-table
    [headerRows]="headerRows"
    [columnLabels]="columnLabels"
    [dataColumns]="dataColumns"
    [data]="data"
    [footerRows]="footerRows"
    [showStt]="false"
    [editable]="true"
    (rowSaved)="updateRecord($event)"
    (rowDeleted)="deleteRecord($event)">
  </app-ledger-table>
</div>
