<!--
  S6-HKD: SỔ QUỸ TIỀN MẶT
  Circular 88/2021/TT-BTC - Appendix 2 - Mẫu số S6-HKD
-->
<div class="ledger-page">
  <!-- Page Title -->
  <h2 class="page-title">SỔ QUỸ TIỀN MẶT</h2>

  <!-- Opening Balance -->
  <div class="opening-balance">
    <div class="balance-title">Số dư đầu kỳ</div>
    <div class="balance-grid">
      <div class="balance-item">
        <label>Số tiền tồn quỹ:</label>
        <input type="number" [(ngModel)]="soDuDauKy" (blur)="updateSoDuDauKy()" />
        <span class="currency-label">VNĐ</span>
      </div>
    </div>
  </div>

  <!-- Entry Form -->
  <div class="entry-form">
    <div class="form-title">Thêm bút toán thu/chi tiền mặt</div>
    <div class="form-grid">
      <div class="form-group">
        <label>Ngày ghi sổ *</label>
        <input type="date" [(ngModel)]="newRecord.ngayThangGhiSo" />
      </div>
      <div class="form-group">
        <label>Ngày chứng từ</label>
        <input type="date" [(ngModel)]="newRecord.ngayThangChungTu" />
      </div>
      <div class="form-group">
        <label>Số hiệu CT *</label>
        <input type="text" [(ngModel)]="newRecord.soHieuChungTu" placeholder="VD: PT001" />
      </div>
      <div class="form-group form-group-wide">
        <label>Diễn giải *</label>
        <input type="text" [(ngModel)]="newRecord.dienGiai" placeholder="Nội dung thu/chi" />
      </div>
      <div class="form-group">
        <label>Số tiền THU</label>
        <input type="number" [(ngModel)]="newRecord.soTienThu" placeholder="0" class="input-thu" />
      </div>
      <div class="form-group">
        <label>Số tiền CHI</label>
        <input type="number" [(ngModel)]="newRecord.soTienChi" placeholder="0" class="input-chi" />
      </div>
      <div class="form-group">
        <label>Ghi chú</label>
        <input type="text" [(ngModel)]="newRecord.ghiChu" />
      </div>
      <div class="form-group">
        <button class="btn-add" (click)="addRecord()">+ Thêm</button>
      </div>
    </div>
  </div>

  <!-- Summary -->
  <div class="summary-bar">
    <span>Số bút toán: <strong>{{ data.length }}</strong></span>
    <span class="thu">Tổng thu: <strong>{{ getTongThu() }}</strong></span>
    <span class="chi">Tổng chi: <strong>{{ getTongChi() }}</strong></span>
    <span class="ton">Tồn quỹ: <strong>{{ getSoDuCuoiKy() }}</strong></span>
  </div>

  <!-- Data Table -->
  <app-ledger-table
    [headerRows]="headerRows"
    [columnLabels]="columnLabels"
    [dataColumns]="dataColumns"
    [data]="data"
    [footerRows]="footerRows"
    [showStt]="false"
    [editable]="true"
    (rowSaved)="updateRecord($event)"
    (rowDeleted)="deleteRecord($event)">
  </app-ledger-table>
</div>
